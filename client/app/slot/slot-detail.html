<div class="slot-container" ng-show="slotCtrl.doesSlotExist()">
  <div class="panel panel-default">
    <div class="panel-heading">Slot Info:
      <div class="pull-right"><span ng-show="slotCtrl.isReadOnly()"><a href="" ng-click="slotCtrl.toggleEdit()">Edit Locations</a> | </span><a href="/slots">Back to slot list</a></div>
    </div>
    <div class="panel-body">
      <strong>Job title</strong>: {{ slotCtrl.getJobTitle(slotCtrl.slot.jobID) }} <br />
      <strong>Start time</strong>: {{ slotCtrl.parseTime(slotCtrl.slot.start) }} <br />
      <strong>End time</strong>: {{ slotCtrl.parseTime(slotCtrl.slot.end) }} <br />
      <strong>Volunteers needed for slot</strong>: {{ slotCtrl.slot.volunteersNeeded }} <br />
      <strong>Volunteers still needed</strong>: {{ slotCtrl.slot.left }} <br />
      <ul style="list-style: none; padding-left: 20px;">
        <li ng-repeat="location in slotCtrl.locations | orderBy:'name'" style="padding-top: 2px; padding-bottom: 2px;"><strong>{{ location.name }}</strong>: {{ location.count }}</li>
      </ul>
    </div>
  </div>

  <div class="panel panel-default" ng-hide="slotCtrl.isReadOnly()">
    <div class="panel-heading">Add locations for this time slot:</div>
    <div class="panel-body">
      <div class="form-group">
        <label for="locations"><strong>Pick a location</strong></label><br />
        <select id="locations" name="locations" ng-model="slotCtrl.locationToChoose">
          <option ng-repeat="location in slotCtrl.allLocations" value="{{ location._id }}" >{{ location.name }}</option>
        </select>
      </div>
      <button ng-click="slotCtrl.chooseLocation()" class="btn btn-default">Add Location</button>
    </div>
  </div>

  <div class="panel panel-default" ng-hide="slotCtrl.isReadOnly()">
    <div class="panel-heading">New locations to be added:</div>
    <div class="list-group">
      <div class="list-group-item no-padding" style="" ng-repeat="location in slotCtrl.newLocations">
        <div class="group-item">
          {{ location.name }}
        </div>
        <a ng-click="slotCtrl.removeLocation(location)" ng-href="" class="btn btn-sm btn-danger group-item-remove" style=""><span class="glyphicon glyphicon-trash"></span></a>
      </div>
    </div>
    <div class="panel-body" ng-hide="slotCtrl.areThereNewLocations()">There are currently no locations.</div>
  </div>

  <div class="panel panel-default" ng-hide="slotCtrl.isReadOnly()">
    <div class="panel-heading">Current locations for this time slot:</div>
    <div class="list-group">
      <div class="list-group-item no-padding" style="" ng-repeat="location in slotCtrl.locations">
        <div class="group-item">
          {{ location.name }}
        </div>
        <a ng-click="slotCtrl.deleteLocation(location)" ng-href="" class="btn btn-sm btn-danger group-item-remove" style=""><span class="glyphicon glyphicon-trash"></span></a>
      </div>
    </div>
    <div class="panel-body" ng-hide="slotCtrl.areThereLocations()">There are currently no locations.</div>
  </div>

  <div ng-hide="slotCtrl.isReadOnly()" class="text-center">
    <button class="btn btn-primary" type="submit" ng-click="slotCtrl.updateSlot()" name="submit">Update Slot</button>
    <button class="btn btn-danger" type="submit" ng-click="slotCtrl.cancelUpdates()" name="cancel">Cancel Changes</button>
  </div>

  <div class="panel panel-default" ng-show="slotCtrl.isReadOnly()">
    <div class="panel-heading">Volunteers assigned to this time slot:</div>
    <div class="list-group">
      <div class="list-group-item no-padding" ng-repeat="volunteer in slotCtrl.vols | orderBy: 'lastName'">
        <a ng-href="/volunteers/{{volunteer._id}}" class="group-item">{{ volunteer.firstName }} {{ volunteer.lastName }}: {{ volunteer.location.name }}</a>
        <a ng-click="slotCtrl.removeVolunteer(volunteer)" ng-href="" class="btn btn-sm btn-danger group-item-remove"><span class="glyphicon glyphicon-trash"></span></a>
      </div>
    </div>
    <div class="panel-body" ng-hide="slotCtrl.areThereAssignees()">There are currently no volunteers assigned to this time slot.</div>
  </div>

  <div class="panel panel-default" ng-show="slotCtrl.isReadOnly()">
    <div class="panel-heading">Add a volunteer to this time slot:</div>
    <div class="panel-body" ng-show="slotCtrl.areThereVolunteers()">
      <div class="success" ng-show="slotCtrl.isSuccess()">You have successfully added a volunteer to this time slot.<br /><br /></div>
      <div class="warning" ng-show="slotCtrl.isError()">{{ slotCtrl.errorMessage }}<br /><br /></div>
      <form>
        <div class="clearfix">
          <div class="form-group pull-left">
            <label for="volunteer">Pick a volunteer</label><br />
            <select id="volunteer" name="volunteer" ng-model="slotCtrl.volunteer" required>
              <option ng-show="filteredVols.length" class="dropdown-header" disabled>Volunteers that prefer this job:</option>
              <option ng-show="filteredVols.length" ng-repeat="vol in filteredVols = (slotCtrl.volunteers | filter: slotCtrl.getJobTitle(slotCtrl.slot.jobID) | orderBy: 'lastName')" value="{{ vol._id }}" ng-if="!vol.inSlot">{{ vol.firstName }} {{ vol.lastName }}</option>
              <option ng-show="filteredVols.length" class="dropdown-header" disabled>All volunteers:</option>
              <option ng-repeat="vol in slotCtrl.volunteers | orderBy: 'lastName'" value="{{ vol._id }}" ng-if="!vol.inSlot">{{ vol.firstName }} {{ vol.lastName }}</option>
            </select>
          </div>
          <div class="form-group pull-left pad-left">
            <label for="volunteer">Pick a location</label><br />
            <select id="location" name="location" ng-model="slotCtrl.location" required>
              <option ng-repeat="loc in slotCtrl.locations | orderBy: 'name'" ng-if="loc.count > 0" value="{{ loc._id }}" >{{ loc.name }}</option>
            </select>
          </div>
        </div>
        <button type="submit" ng-click="slotCtrl.addVolunteer()" class="btn btn-default">Add Volunteer</button>
      </form>
    </div>
    <div class="panel-body" ng-hide="slotCtrl.areThereVolunteers()">There are currently no volunteers to be added.</div>
  </div>
</div>

<div class="panel panel-default slot-container" ng-hide="slotCtrl.doesSlotExist()">
  <div class="panel-heading">Slot Info:</div>
  <div class="panel-body">
    This time slot does not exist.
  </div>
</div>
